<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مختبر الاستراتيجية التفاعلي | محمد طه</title>
    <style>
        :root {
            --primary: #4361ee;
            --success: #2ecc71;
            --danger: #e74c3c;
            --dark: #2d3436;
            --light: #f9f9f9;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #e0e5ec; color: var(--dark); display: flex; justify-content: center; padding: 20px; }
        .quiz-card { background: var(--light); width: 100%; max-width: 800px; border-radius: 20px; box-shadow: 20px 20px 60px #bebebe, -20px -20px 60px #ffffff; padding: 40px; }
        .header { text-align: center; border-bottom: 2px solid #ddd; margin-bottom: 20px; padding-bottom: 10px; }
        .question-box { background: white; padding: 20px; border-radius: 15px; border-right: 10px solid var(--primary); font-size: 1.2rem; margin-bottom: 25px; min-height: 80px; display: flex; align-items: center; }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .btn { padding: 15px; border: 2px solid var(--primary); border-radius: 10px; background: none; cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.3s; }
        .btn:hover:not([disabled]) { background: var(--primary); color: white; }
        .btn[disabled] { cursor: not-allowed; opacity: 0.6; }
        
        /* التغذية الراجعة */
        #feedback-area { margin-top: 25px; padding: 20px; border-radius: 10px; display: none; animation: fadeIn 0.5s; }
        .correct-bg { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .wrong-bg { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        
        #next-btn { margin-top: 15px; padding: 10px 25px; background: var(--dark); color: white; border: none; border-radius: 5px; cursor: pointer; float: left; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .score-text { font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

<div class="quiz-card">
    <div class="header">
        <h2>تحليل الحالات التطبيقية (SWOT vs PESTEL)</h2>
        <p>نقاط: <span id="score" class="score-text">0</span> | سؤال: <span id="q-count">1</span>/5</p>
    </div>

    <div id="game-body">
        <div class="question-box" id="question-text">جاري تحميل الحالة...</div>
        
        <div class="options-container" id="options">
            <button class="btn" onclick="handleChoice('SWOT-S')">نقطة قوة (S)</button>
            <button class="btn" onclick="handleChoice('SWOT-W')">نقطة ضعف (W)</button>
            <button class="btn" onclick="handleChoice('PESTEL-P')">عامل سياسي/قانوني</button>
            <button class="btn" onclick="handleChoice('PESTEL-E')">عامل اقتصادي</button>
        </div>

        <div id="feedback-area">
            <strong id="status-text"></strong>
            <p id="explanation-text"></p>
            <button id="next-btn" onclick="nextQuestion()">التالي ←</button>
        </div>
    </div>

    <div id="result-screen" style="display:none; text-align:center;">
        <h2>النتيجة النهائية</h2>
        <h1 id="final-score" style="font-size: 3rem; color: var(--primary);"></h1>
        <button class="btn" onclick="location.reload()">إعادة الاختبار</button>
    </div>
</div>

<script>
    const quizData = [
        {
            case: "تغيير القوانين الضريبية وفرض رسوم استيراد جديدة على المواد الخام.",
            correct: "PESTEL-P",
            explain: "هذا عامل **خارجي** كلي مرتبط بالتشريعات والقوانين (Legal/Political)، لذا يقع تحت مظلة PESTEL وليس SWOT."
        },
        {
            case: "تمتلك الشركة طاقم عمل خبير لديه خبرة تزيد عن 15 عاماً في السوق.",
            correct: "SWOT-S",
            explain: "هذه ميزة **داخلية** تمتلكها الشركة وتتفوق بها، لذا فهي نقطة قوة (Strength) في تحليل SWOT."
        },
        {
            case: "تعطل خط الإنتاج بشكل متكرر بسبب قدم الآلات داخل المصنع.",
            correct: "SWOT-W",
            explain: "هذا قصور **داخلي** يؤثر على الكفاءة، لذا يصنف كـ نقطة ضعف (Weakness) في تحليل SWOT."
        },
        {
            case: "تذبذب سعر صرف العملة المحلية مما أدى لارتفاع التكاليف الإجمالية.",
            correct: "PESTEL-E",
            explain: "أسعار الصرف والتضخم هي عوامل **خارجية** تؤثر على السوق بالكامل، وتندرج تحت العامل الاقتصادي (Economic) في PESTEL."
        },
        {
            case: "إصدار براءة اختراع جديدة للشركة تمنع المنافسين من تقليد منتجها.",
            correct: "SWOT-S",
            explain: "براءة الاختراع هي أصل **داخلي** وقوة قانونية للشركة، فهي نقطة قوة (Strength) تعزز مكانتها."
        }
    ];

    let currentIdx = 0;
    let score = 0;

    function displayQuestion() {
        const q = quizData[currentIdx];
        document.getElementById('question-text').innerText = q.case;
        document.getElementById('q-count').innerText = currentIdx + 1;
        document.getElementById('feedback-area').style.display = 'none';
        enableButtons(true);
    }

    function handleChoice(choice) {
        const q = quizData[currentIdx];
        const feedbackArea = document.getElementById('feedback-area');
        const statusText = document.getElementById('status-text');
        const explanationText = document.getElementById('explanation-text');
        
        enableButtons(false);
        feedbackArea.style.display = 'block';

        if (choice === q.correct) {
            score += 20;
            statusText.innerText = "✅ إجابة صحيحة!";
            feedbackArea.className = "correct-bg";
            document.getElementById('score').innerText = score;
        } else {
            statusText.innerText = "❌ إجابة غير دقيقة!";
            feedbackArea.className = "wrong-bg";
        }
        explanationText.innerHTML = q.explain;
    }

    function enableButtons(status) {
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(b => b.disabled = !status);
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < quizData.length) {
            displayQuestion();
        } else {
            showFinal();
        }
    }

    function showFinal() {
        document.getElementById('game-body').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-score').innerText = score + "/100";
    }

    displayQuestion();
</script>

</body>
</html>
